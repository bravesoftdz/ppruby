# Пакет ppRuby

<img src="https://raw.github.com/shikhalev/ppruby/master/img/logo.png" align="right">

Пакет `ppRuby` предоставляет доступ к [Ruby API][api] для языка Free Pascal.
Использовать его можно для двух основных задач:
* Написание библиотек расширения для Ruby;
* Встраивание Ruby в программы на Free Pascal / Lazarus в качестве скриптового
  языка.

В первом случае понадобится только `ruby.pas` скомпилированный в [статическом
режиме](#Статическая-компиляция). Во втором будет лучше (хотя и 
необязательно) использовать
прочие модули пакета, которые предоставляют разнообразные утилиты для удобной
работы, а также механизм конвертации pascal-объектов в Ruby, автоматически
транслирующий published-свойства.

## Введение

### Состав пакета

* Каталог `demo` — содержит небольшой демонстрационный проект.
  * Подкаталог `rb` — скрипты (`rb/*.rb`), предназначенные для запуска в демо-проекте.
    По мере расширения возможностей пакета этот подкаталог также будет 
    дополняться.
  * Файлы: `aboutform.{lfm,pas}`, `demo.{ico,lpi,lpr}`, `mainform.{lfm,pas}` —
    собственно исходные файлы демо-проекта.
* Каталог `doc` и файлы `doc/*.md` — настоящая документация.
* Каталог `img` и файлы `img/logo.{png,xcf}` — логотип проекта.
* Каталог `src` — собственно исходные файлы пакета.
  * `rbopts.inc` — включаемый файл, определяющий существенные для компиляции
    параметры. Включается во все модули пакета.
  * `rbdefs.inc` — включаемый файл, доопределяющий переменные 
    [условной компиляции](#Режимы-условной-компиляции)
    в зависимости от уже заданных. Требуется только для `ruby.pas`, вынесен
    в отдельную сущность ради логического разделения.
  * `ruby.pas` — определяет необходимые типы и предоставляет доступ к API.
    В дополнение к этому определяет процедуры инициализации, финализации 
    и управление выбором версии в случае динамической загрузки библиотеки.
    Для удобства большая часть кода вынесена во включаемые файлы:
    * `rbtypes.inc` — определения типов, используемых функциями API.
    * `rbdynintf.inc` — интерфейсная часть для динамической загрузки.
    * `rbstatintf.inc` — интерфейс статической загрузки.
    * `rbmacrointf.inc` — интерфейс для `inline`-функций, представленных
      в оригинальном API (на языке C) как макросы.

### Режимы условной компиляции

#### Статическая компиляция

#### Динамическая компиляция

## Модуль `Ruby`

## `RbTools` и `RbObjects`

[api]: http://rubydoc.info/stdlib/core/file/README.EXT
