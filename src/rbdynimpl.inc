
uses
  dynlibs;

var
  libHandle : TLibHandle = 0;

var
  IMMEDIATE_MASK : PtrUInt;
  FIXNUM_FLAG    : PtrUInt;
  FLONUM_MASK    : PtrUInt;
  FLONUM_FLAG    : PtrUInt;
  SYMBOL_FLAG    : PtrUInt;
  SPECIAL_SHIFT  : Integer;

var
  rb_float_new : p_double_constructor;
  rb_float_new_in_heap : p_double_constructor;

procedure load_consts (check_flonum : boolean); local;
 begin
  if check_flonum
     then USE_FLONUM := SizeOf(VALUE) >= SizeOf(cdouble)
     else USE_FLONUM := False;
  if USE_FLONUM
     then begin
           Qfalse.value := $00;
           Qtrue.value  := $14;
           Qnil.value   := $08;
           Qundef.value := $34;
           IMMEDIATE_MASK := $07;
           FIXNUM_FLAG    := $01;
           FLONUM_MASK    := $03;
           FLONUM_FLAG    := $02;
           SYMBOL_FLAG    := $0c;
           SPECIAL_SHIFT  := 8;
          end
     else begin
           Qfalse.value := 0;
           Qtrue.value  := 2;
           Qnil.value   := 4;
           Qundef.value := 6;
           IMMEDIATE_MASK := $03;
           FIXNUM_FLAG    := $01;
           FLONUM_MASK    := $00;
           FLONUM_FLAG    := $02;
           SYMBOL_FLAG    := $0e;
           SPECIAL_SHIFT  := 8;
          end;
 end;

procedure ld_p (out p; const name : AnsiString); local;
 begin
  Pointer(p) := GetProcedureAddress(libHandle, name);
 end;

procedure ld_v (out v : VALUE; const name : AnsiString); local;
 var
   p : PVALUE;
 begin
  p := GetProcedureAddress(libHandle, name);
  if p = nil
     then v := Qnil
     else v := p^;
 end;

procedure ld_i (out i; const name : AnsiString; count : Integer); local;
 var
   p : pcint;
   c : Integer;
 begin
  p := GetProcedureAddress(libHandle, name);
  if p <> nil
     then for c := 0 to count - 1 do
              pcint(@i)[c] := p[c];
 end;

procedure load_procs; local;
 begin
  // load common special vars
  ld_p(p_stderr, 'rb_stderr');
  ld_p(p_stdin,  'rb_stdin');
  ld_p(p_stdout, 'rb_stdout');
  ld_p(p_ruby_copyright,    'ruby_copyright');
  ld_p(p_ruby_description,  'ruby_description');
  ld_p(p_ruby_engine,       'ruby_engine');
  ld_p(p_ruby_platform,     'ruby_platform');
  ld_p(p_ruby_release_date, 'ruby_release_date');
  ld_p(p_ruby_version,      'ruby_version');
  ld_i(ruby_api_version, 'ruby_api_version', 3);
  ld_i(ruby_patchlevel,  'ruby_patchlevel', 1);
  // load common functions
  ld_p(rb_add_event_hook, 'rb_add_event_hook');
  ld_p(rb_alias, 'rb_alias');
  ld_p(rb_alias_variable, 'rb_alias_variable');
  ld_p(rb_alloc_tmp_buffer, 'rb_alloc_tmp_buffer');
  ld_p(rb_any_to_s, 'rb_any_to_s');
  ld_p(rb_apply, 'rb_apply');
  ld_p(rb_Array, 'rb_Array');
  ld_p(rb_ary_aref, 'rb_ary_aref');
  ld_p(rb_ary_assoc, 'rb_ary_assoc');
  ld_p(rb_ary_clear, 'rb_ary_clear');
  ld_p(rb_ary_cmp, 'rb_ary_cmp');
  ld_p(rb_ary_concat, 'rb_ary_concat');
  ld_p(rb_ary_delete, 'rb_ary_delete');
  ld_p(rb_ary_delete_at, 'rb_ary_delete_at');
  ld_p(rb_ary_dup, 'rb_ary_dup');
  ld_p(rb_ary_each, 'rb_ary_each');
  ld_p(rb_ary_entry, 'rb_ary_entry');
  ld_p(rb_ary_free, 'rb_ary_free');
  ld_p(rb_ary_freeze, 'rb_ary_freeze');
  ld_p(rb_ary_includes, 'rb_ary_includes');
  ld_p(rb_ary_join, 'rb_ary_join');
  ld_p(rb_ary_memsize, 'rb_ary_memsize');
  ld_p(rb_ary_modify, 'rb_ary_modify');
  ld_p(rb_ary_new, 'rb_ary_new');
  ld_p(rb_ary_new2, 'rb_ary_new2');
  ld_p(rb_ary_new3, 'rb_ary_new3');
  ld_p(rb_ary_new4, 'rb_ary_new4');
  ld_p(rb_ary_plus, 'rb_ary_plus');
  ld_p(rb_ary_pop, 'rb_ary_pop');
  ld_p(rb_ary_push, 'rb_ary_push');
  ld_p(rb_ary_rassoc, 'rb_ary_rassoc');
  ld_p(rb_ary_replace, 'rb_ary_replace');
  ld_p(rb_ary_resize, 'rb_ary_resize');
  ld_p(rb_ary_resurrect, 'rb_ary_resurrect');
  ld_p(rb_ary_reverse, 'rb_ary_reverse');
  ld_p(rb_ary_shift, 'rb_ary_shift');
  ld_p(rb_ary_sort, 'rb_ary_sort');
  ld_p(rb_ary_sort_bang, 'rb_ary_sort_bang');
  ld_p(rb_ary_store, 'rb_ary_store');
  ld_p(rb_ary_subseq, 'rb_ary_subseq');
  ld_p(rb_ary_tmp_new, 'rb_ary_tmp_new');
  ld_p(rb_ary_to_ary, 'rb_ary_to_ary');
  ld_p(rb_ary_to_s, 'rb_ary_to_s');
  ld_p(rb_ary_unshift, 'rb_ary_unshift');
  ld_p(rb_ascii8bit_encindex, 'rb_ascii8bit_encindex');
  ld_p(rb_ascii8bit_encoding, 'rb_ascii8bit_encoding');
  ld_p(rb_assoc_new, 'rb_assoc_new');
  ld_p(rb_attr, 'rb_attr');
  ld_p(rb_attr_get, 'rb_attr_get');
  ld_p(rb_autoload, 'rb_autoload');
  ld_p(rb_autoload_load, 'rb_autoload_load');
  ld_p(rb_autoload_p, 'rb_autoload_p');
  ld_p(rb_backref_get, 'rb_backref_get');
  ld_p(rb_backref_set, 'rb_backref_set');
  ld_p(rb_backtrace, 'rb_backtrace');
  ld_p(rb_big_2comp, 'rb_big_2comp');
  ld_p(rb_big2dbl, 'rb_big2dbl');
  ld_p(rb_big2ll, 'rb_big2ll');
  ld_p(rb_big2long, 'rb_big2long');
  ld_p(rb_big2str, 'rb_big2str');
  ld_p(rb_big2str0, 'rb_big2str0');
  ld_p(rb_big2ull, 'rb_big2ull');
  ld_p(rb_big2ulong, 'rb_big2ulong');
  ld_p(rb_big2ulong_pack, 'rb_big2ulong_pack');
  ld_p(rb_big_and, 'rb_big_and');
  ld_p(rb_big_clone, 'rb_big_clone');
  ld_p(rb_big_cmp, 'rb_big_cmp');
  ld_p(rb_big_div, 'rb_big_div');
  ld_p(rb_big_divmod, 'rb_big_divmod');
  ld_p(rb_big_eq, 'rb_big_eq');
  ld_p(rb_big_eql, 'rb_big_eql');
  ld_p(rb_big_idiv, 'rb_big_idiv');
  ld_p(rb_big_lshift, 'rb_big_lshift');
  ld_p(rb_big_minus, 'rb_big_minus');
  ld_p(rb_big_modulo, 'rb_big_modulo');
  ld_p(rb_big_mul, 'rb_big_mul');
  ld_p(rb_big_new, 'rb_big_new');
  ld_p(rb_big_norm, 'rb_big_norm');
  ld_p(rb_big_or, 'rb_big_or');
  ld_p(rb_big_pack, 'rb_big_pack');
  ld_p(rb_big_plus, 'rb_big_plus');
  ld_p(rb_big_pow, 'rb_big_pow');
  ld_p(rb_big_resize, 'rb_big_resize');
  ld_p(rb_big_rshift, 'rb_big_rshift');
  ld_p(rb_big_unpack, 'rb_big_unpack');
  ld_p(rb_big_xor, 'rb_big_xor');
  ld_p(rb_bigzero_p, 'rb_bigzero_p');
  ld_p(rb_binding_new, 'rb_binding_new');
  ld_p(rb_block_call, 'rb_block_call');
  ld_p(rb_block_given_p, 'rb_block_given_p');
  ld_p(rb_block_lambda, 'rb_block_lambda');
  ld_p(rb_block_proc, 'rb_block_proc');
  ld_p(rb_bug, 'rb_bug');
  ld_p(rb_bug_errno, 'rb_bug_errno');
  ld_p(rb_call_super, 'rb_call_super');
  ld_p(rb_catch, 'rb_catch');
  ld_p(rb_catch_obj, 'rb_catch_obj');
  ld_p(rb_char_to_option_kcode, 'rb_char_to_option_kcode');
  ld_p(rb_check_array_type, 'rb_check_array_type');
  ld_p(rb_check_convert_type, 'rb_check_convert_type');
  ld_p(rb_check_frozen, 'rb_check_frozen');
  ld_p(rb_check_funcall, 'rb_check_funcall');
  ld_p(rb_check_hash_type, 'rb_check_hash_type');
  ld_p(rb_check_inheritable, 'rb_check_inheritable');
  ld_p(rb_check_safe_obj, 'rb_check_safe_obj');
  ld_p(rb_check_safe_str, 'rb_check_safe_str');
  ld_p(rb_check_string_type, 'rb_check_string_type');
  ld_p(rb_check_to_float, 'rb_check_to_float');
  ld_p(rb_check_to_integer, 'rb_check_to_integer');
  ld_p(rb_check_type, 'rb_check_type');
  ld_p(rb_check_typeddata, 'rb_check_typeddata');
  ld_p(rb_class2name, 'rb_class2name');
  ld_p(rb_class_boot, 'rb_class_boot');
  ld_p(rb_class_get_superclass, 'rb_class_get_superclass');
  ld_p(rb_class_inherited, 'rb_class_inherited');
  ld_p(rb_class_inherited_p, 'rb_class_inherited_p');
  ld_p(rb_class_instance_methods, 'rb_class_instance_methods');
  ld_p(rb_class_name, 'rb_class_name');
  ld_p(rb_class_new, 'rb_class_new');
  ld_p(rb_class_new_instance, 'rb_class_new_instance');
  ld_p(rb_class_path, 'rb_class_path');
  ld_p(rb_class_private_instance_methods, 'rb_class_private_instance_methods');
  ld_p(rb_class_protected_instance_methods, 'rb_class_protected_instance_methods');
  ld_p(rb_class_public_instance_methods, 'rb_class_public_instance_methods');
  ld_p(rb_class_real, 'rb_class_real');
  ld_p(rb_class_superclass, 'rb_class_superclass');
  ld_p(rb_clear_cache, 'rb_clear_cache');
  ld_p(rb_clear_cache_by_class, 'rb_clear_cache_by_class');
  ld_p(rb_close_before_exec, 'rb_close_before_exec');
  ld_p(rb_cmperr, 'rb_cmperr');
  ld_p(rb_cmpint, 'rb_cmpint');
  ld_p(rb_compile_cstr, 'rb_compile_cstr');
  ld_p(rb_compile_error, 'rb_compile_error');
  ld_p(rb_compile_error_append, 'rb_compile_error_append');
  ld_p(rb_compile_error_with_enc, 'rb_compile_error_with_enc');
  ld_p(rb_compile_file, 'rb_compile_file');
  ld_p(rb_compile_string, 'rb_compile_string');
  ld_p(rb_compile_warn, 'rb_compile_warn');
  ld_p(rb_compile_warning, 'rb_compile_warning');
  ld_p(rb_Complex, 'rb_Complex');
  ld_p(rb_complex_new, 'rb_complex_new');
  ld_p(rb_complex_polar, 'rb_complex_polar');
  ld_p(rb_complex_raw, 'rb_complex_raw');
  ld_p(rb_const_defined, 'rb_const_defined');
  ld_p(rb_const_defined_at, 'rb_const_defined_at');
  ld_p(rb_const_defined_from, 'rb_const_defined_from');
  ld_p(rb_const_get, 'rb_const_get');
  ld_p(rb_const_get_at, 'rb_const_get_at');
  ld_p(rb_const_get_from, 'rb_const_get_from');
  ld_p(rb_const_list, 'rb_const_list');
  ld_p(rb_const_remove, 'rb_const_remove');
  ld_p(rb_const_set, 'rb_const_set');
  ld_p(rb_convert_type, 'rb_convert_type');
  ld_p(rb_copy_generic_ivar, 'rb_copy_generic_ivar');
  ld_p(rb_cstr2inum, 'rb_cstr2inum');
  ld_p(rb_cstr_to_dbl, 'rb_cstr_to_dbl');
  ld_p(rb_cstr_to_inum, 'rb_cstr_to_inum');
  ld_p(rb_cvar_defined, 'rb_cvar_defined');
  ld_p(rb_cvar_get, 'rb_cvar_get');
  ld_p(rb_cvar_set, 'rb_cvar_set');
  ld_p(rb_cv_get, 'rb_cv_get');
  ld_p(rb_cv_set, 'rb_cv_set');
  ld_p(rb_data_object_alloc, 'rb_data_object_alloc');
  ld_p(rb_data_typed_object_alloc, 'rb_data_typed_object_alloc');
  ld_p(rb_dbl2big, 'rb_dbl2big');
  ld_p(rb_dbl_cmp, 'rb_dbl_cmp');
  ld_p(rb_declare_transcoder, 'rb_declare_transcoder');
  ld_p(rb_default_external_encoding, 'rb_default_external_encoding');
  ld_p(rb_default_internal_encoding, 'rb_default_internal_encoding');
  ld_p(rb_define_alias, 'rb_define_alias');
  ld_p(rb_define_alloc_func, 'rb_define_alloc_func');
  ld_p(rb_define_attr, 'rb_define_attr');
  ld_p(rb_define_class, 'rb_define_class');
  ld_p(rb_define_class_id, 'rb_define_class_id');
  ld_p(rb_define_class_id_under, 'rb_define_class_id_under');
  ld_p(rb_define_class_under, 'rb_define_class_under');
  ld_p(rb_define_class_variable, 'rb_define_class_variable');
  ld_p(rb_define_const, 'rb_define_const');
  ld_p(rb_define_dummy_encoding, 'rb_define_dummy_encoding');
  ld_p(rb_define_global_const, 'rb_define_global_const');
  ld_p(rb_define_global_function, 'rb_define_global_function');
  ld_p(rb_define_hooked_variable, 'rb_define_hooked_variable');
  ld_p(rb_define_method, 'rb_define_method');
  ld_p(rb_define_method_id, 'rb_define_method_id');
  ld_p(rb_define_module, 'rb_define_module');
  ld_p(rb_define_module_function, 'rb_define_module_function');
  ld_p(rb_define_module_id, 'rb_define_module_id');
  ld_p(rb_define_module_id_under, 'rb_define_module_id_under');
  ld_p(rb_define_module_under, 'rb_define_module_under');
  ld_p(rb_define_private_method, 'rb_define_private_method');
  ld_p(rb_define_protected_method, 'rb_define_protected_method');
  ld_p(rb_define_readonly_variable, 'rb_define_readonly_variable');
  ld_p(rb_define_singleton_method, 'rb_define_singleton_method');
  ld_p(rb_define_variable, 'rb_define_variable');
  ld_p(rb_define_virtual_variable, 'rb_define_virtual_variable');
  ld_p(rb_detach_process, 'rb_detach_process');
  ld_p(rb_dir_getwd, 'rb_dir_getwd');
  ld_p(rb_during_gc, 'rb_during_gc');
  ld_p(rb_each, 'rb_each');
  ld_p(rb_econv_asciicompat_encoding, 'rb_econv_asciicompat_encoding');
  ld_p(rb_econv_binmode, 'rb_econv_binmode');
  ld_p(rb_econv_check_error, 'rb_econv_check_error');
  ld_p(rb_econv_close, 'rb_econv_close');
  ld_p(rb_econv_convert, 'rb_econv_convert');
  ld_p(rb_econv_decorate_at_first, 'rb_econv_decorate_at_first');
  ld_p(rb_econv_decorate_at_last, 'rb_econv_decorate_at_last');
  ld_p(rb_econv_encoding_to_insert_output, 'rb_econv_encoding_to_insert_output');
  ld_p(rb_econv_has_convpath_p, 'rb_econv_has_convpath_p');
  ld_p(rb_econv_insert_output, 'rb_econv_insert_output');
  ld_p(rb_econv_make_exception, 'rb_econv_make_exception');
  ld_p(rb_econv_open, 'rb_econv_open');
  ld_p(rb_econv_open_exc, 'rb_econv_open_exc');
  ld_p(rb_econv_open_opts, 'rb_econv_open_opts');
  ld_p(rb_econv_prepare_options, 'rb_econv_prepare_options');
  ld_p(rb_econv_prepare_opts, 'rb_econv_prepare_opts');
  ld_p(rb_econv_putback, 'rb_econv_putback');
  ld_p(rb_econv_putbackable, 'rb_econv_putbackable');
  ld_p(rb_econv_set_replacement, 'rb_econv_set_replacement');
  ld_p(rb_econv_str_append, 'rb_econv_str_append');
  ld_p(rb_econv_str_convert, 'rb_econv_str_convert');
  ld_p(rb_econv_substr_append, 'rb_econv_substr_append');
  ld_p(rb_econv_substr_convert, 'rb_econv_substr_convert');
  ld_p(rb_enc_ascget, 'rb_enc_ascget');
  ld_p(rb_enc_associate, 'rb_enc_associate');
  ld_p(rb_enc_associate_index, 'rb_enc_associate_index');
  ld_p(rb_enc_check, 'rb_enc_check');
  ld_p(rb_enc_codelen, 'rb_enc_codelen');
  ld_p(rb_enc_codepoint, 'rb_enc_codepoint');
  ld_p(rb_enc_codepoint_len, 'rb_enc_codepoint_len');
  ld_p(rb_enc_compatible, 'rb_enc_compatible');
  ld_p(rb_enc_copy, 'rb_enc_copy');
  ld_p(rb_encdb_alias, 'rb_encdb_alias');
  ld_p(rb_encdb_declare, 'rb_encdb_declare');
  ld_p(rb_encdb_dummy, 'rb_encdb_dummy');
  ld_p(rb_encdb_replicate, 'rb_encdb_replicate');
  ld_p(rb_enc_default_external, 'rb_enc_default_external');
  ld_p(rb_enc_default_internal, 'rb_enc_default_internal');
  ld_p(rb_enc_fast_mbclen, 'rb_enc_fast_mbclen');
  ld_p(rb_enc_find, 'rb_enc_find');
  ld_p(rb_enc_find_index, 'rb_enc_find_index');
  ld_p(rb_enc_from_encoding, 'rb_enc_from_encoding');
  ld_p(rb_enc_from_index, 'rb_enc_from_index');
  ld_p(rb_enc_get, 'rb_enc_get');
  ld_p(rb_enc_get_index, 'rb_enc_get_index');
  ld_p(rb_enc_mbclen, 'rb_enc_mbclen');
  ld_p(rb_enc_nth, 'rb_enc_nth');
  ld_p(rb_enc_path_end, 'rb_enc_path_end');
  ld_p(rb_enc_path_last_separator, 'rb_enc_path_last_separator');
  ld_p(rb_enc_path_next, 'rb_enc_path_next');
  ld_p(rb_enc_path_skip_prefix, 'rb_enc_path_skip_prefix');
  ld_p(rb_enc_precise_mbclen, 'rb_enc_precise_mbclen');
  ld_p(rb_enc_register, 'rb_enc_register');
  ld_p(rb_enc_reg_new, 'rb_enc_reg_new');
  ld_p(rb_enc_replicate, 'rb_enc_replicate');
  ld_p(rb_enc_set_base, 'rb_enc_set_base');
  ld_p(rb_enc_set_default_external, 'rb_enc_set_default_external');
  ld_p(rb_enc_set_default_internal, 'rb_enc_set_default_internal');
  ld_p(rb_enc_set_index, 'rb_enc_set_index');
  ld_p(rb_enc_sprintf, 'rb_enc_sprintf');
  ld_p(rb_enc_str_asciionly_p, 'rb_enc_str_asciionly_p');
  ld_p(rb_enc_str_buf_cat, 'rb_enc_str_buf_cat');
  ld_p(rb_enc_str_coderange, 'rb_enc_str_coderange');
  ld_p(rb_enc_strlen, 'rb_enc_strlen');
  ld_p(rb_enc_str_new, 'rb_enc_str_new');
  ld_p(rb_enc_symname2_p, 'rb_enc_symname2_p');
  ld_p(rb_enc_symname_p, 'rb_enc_symname_p');
  ld_p(rb_enc_tolower, 'rb_enc_tolower');
  ld_p(rb_enc_toupper, 'rb_enc_toupper');
  ld_p(rb_enc_uint_chr, 'rb_enc_uint_chr');
  ld_p(rb_enc_unicode_p, 'rb_enc_unicode_p');
  ld_p(rb_ensure, 'rb_ensure');
  ld_p(rb_enumeratorize, 'rb_enumeratorize');
  ld_p(rb_env_clear, 'rb_env_clear');
  ld_p(rb_env_path_tainted, 'rb_env_path_tainted');
  ld_p(rb_eof_error, 'rb_eof_error');
  ld_p(rb_eql, 'rb_eql');
  ld_p(rb_equal, 'rb_equal');
  ld_p(rb_errinfo, 'rb_errinfo');
  ld_p(rb_error_frozen, 'rb_error_frozen');
  ld_p(rb_eval_cmd, 'rb_eval_cmd');
  ld_p(rb_eval_string, 'rb_eval_string');
  ld_p(rb_eval_string_protect, 'rb_eval_string_protect');
  ld_p(rb_eval_string_wrap, 'rb_eval_string_wrap');
  ld_p(rb_exc_fatal, 'rb_exc_fatal');
  ld_p(rb_exc_new, 'rb_exc_new');
  ld_p(rb_exc_new2, 'rb_exc_new2');
  ld_p(rb_exc_new3, 'rb_exc_new3');
  ld_p(rb_exc_raise, 'rb_exc_raise');
  ld_p(rb_exec, 'rb_exec');
  ld_p(rb_exec_arg_addopt, 'rb_exec_arg_addopt');
  ld_p(rb_exec_arg_fixup, 'rb_exec_arg_fixup');
  ld_p(rb_exec_arg_init, 'rb_exec_arg_init');
  ld_p(rb_exec_end_proc, 'rb_exec_end_proc');
  ld_p(rb_exec_err, 'rb_exec_err');
  ld_p(rb_exec_recursive, 'rb_exec_recursive');
  ld_p(rb_exec_recursive_outer, 'rb_exec_recursive_outer');
  ld_p(rb_exec_recursive_paired, 'rb_exec_recursive_paired');
  ld_p(rb_exit, 'rb_exit');
  ld_p(rb_extend_object, 'rb_extend_object');
  ld_p(rb_external_str_new, 'rb_external_str_new');
  ld_p(rb_external_str_new_cstr, 'rb_external_str_new_cstr');
  ld_p(rb_external_str_new_with_enc, 'rb_external_str_new_with_enc');
  ld_p(rb_f_abort, 'rb_f_abort');
  ld_p(rb_fatal, 'rb_fatal');
  ld_p(rb_fd_clr, 'rb_fd_clr');
  ld_p(rb_fd_copy, 'rb_fd_copy');
  ld_p(rb_fd_dup, 'rb_fd_dup');
  ld_p(rb_fd_init, 'rb_fd_init');
  ld_p(rb_fd_isset, 'rb_fd_isset');
  ld_p(rb_fdopen, 'rb_fdopen');
  ld_p(rb_fd_select, 'rb_fd_select');
  ld_p(rb_fd_set, 'rb_fd_set');
  ld_p(rb_fd_term, 'rb_fd_term');
  ld_p(rb_fd_zero, 'rb_fd_zero');
  ld_p(rb_feature_provided, 'rb_feature_provided');
  ld_p(rb_f_exec, 'rb_f_exec');
  ld_p(rb_f_exit, 'rb_f_exit');
  ld_p(rb_f_global_variables, 'rb_f_global_variables');
  ld_p(rb_fiber_alive_p, 'rb_fiber_alive_p');
  ld_p(rb_fiber_current, 'rb_fiber_current');
  ld_p(rb_fiber_new, 'rb_fiber_new');
  ld_p(rb_fiber_resume, 'rb_fiber_resume');
  ld_p(rb_fiber_yield, 'rb_fiber_yield');
  ld_p(rb_file_absolute_path, 'rb_file_absolute_path');
  ld_p(rb_file_directory_p, 'rb_file_directory_p');
  ld_p(rb_file_dirname, 'rb_file_dirname');
  ld_p(rb_file_expand_path, 'rb_file_expand_path');
  ld_p(rb_file_open, 'rb_file_open');
  ld_p(rb_file_open_str, 'rb_file_open_str');
  ld_p(rb_file_s_absolute_path, 'rb_file_s_absolute_path');
  ld_p(rb_file_s_expand_path, 'rb_file_s_expand_path');
  ld_p(rb_filesystem_encindex, 'rb_filesystem_encindex');
  ld_p(rb_filesystem_encoding, 'rb_filesystem_encoding');
  ld_p(rb_filesystem_str_new, 'rb_filesystem_str_new');
  ld_p(rb_filesystem_str_new_cstr, 'rb_filesystem_str_new_cstr');
  ld_p(rb_find_file, 'rb_find_file');
  ld_p(rb_find_file_ext, 'rb_find_file_ext');
  ld_p(rb_find_file_ext_safe, 'rb_find_file_ext_safe');
  ld_p(rb_find_file_safe, 'rb_find_file_safe');
  ld_p(rb_fix2int, 'rb_fix2int');
  ld_p(rb_fix2str, 'rb_fix2str');
  ld_p(rb_fix2uint, 'rb_fix2uint');
  ld_p(rb_f_kill, 'rb_f_kill');
  ld_p(rb_Float, 'rb_Float');
  ld_p(rb_f_notimplement, 'rb_f_notimplement');
  ld_p(rb_fork, 'rb_fork');
  ld_p(rb_fork_err, 'rb_fork_err');
  ld_p(rb_frame_callee, 'rb_frame_callee');
  ld_p(rb_frame_method_id_and_class, 'rb_frame_method_id_and_class');
  ld_p(rb_frame_pop, 'rb_frame_pop');
  ld_p(rb_frame_this_func, 'rb_frame_this_func');
  ld_p(rb_free_generic_ivar, 'rb_free_generic_ivar');
  ld_p(rb_free_tmp_buffer, 'rb_free_tmp_buffer');
  ld_p(rb_f_require, 'rb_f_require');
  ld_p(rb_frozen_class_p, 'rb_frozen_class_p');
  ld_p(rb_f_sprintf, 'rb_f_sprintf');
  ld_p(rb_f_trace_var, 'rb_f_trace_var');
  ld_p(rb_funcall, 'rb_funcall');
  ld_p(rb_funcall2, 'rb_funcall2');
  ld_p(rb_funcall3, 'rb_funcall3');
  ld_p(rb_funcall_passing_block, 'rb_funcall_passing_block');
  ld_p(rb_f_untrace_var, 'rb_f_untrace_var');
  ld_p(rb_gc, 'rb_gc');
  ld_p(rb_gc_call_finalizer_at_exit, 'rb_gc_call_finalizer_at_exit');
  ld_p(rb_gc_copy_finalizer, 'rb_gc_copy_finalizer');
  ld_p(rb_gc_disable, 'rb_gc_disable');
  ld_p(rb_gc_enable, 'rb_gc_enable');
  ld_p(rb_gc_finalize_deferred, 'rb_gc_finalize_deferred');
  ld_p(rb_gc_force_recycle, 'rb_gc_force_recycle');
  ld_p(rb_gc_mark, 'rb_gc_mark');
  ld_p(rb_gc_mark_global_tbl, 'rb_gc_mark_global_tbl');
  ld_p(rb_gc_mark_locations, 'rb_gc_mark_locations');
  ld_p(rb_gc_mark_maybe, 'rb_gc_mark_maybe');
  ld_p(rb_gc_register_address, 'rb_gc_register_address');
  ld_p(rb_gc_register_mark_object, 'rb_gc_register_mark_object');
  ld_p(rb_gc_set_params, 'rb_gc_set_params');
  ld_p(rb_gc_start, 'rb_gc_start');
  ld_p(rb_gc_unregister_address, 'rb_gc_unregister_address');
  ld_p(rb_generic_ivar_memsize, 'rb_generic_ivar_memsize');
  ld_p(rb_generic_ivar_table, 'rb_generic_ivar_table');
  ld_p(rb_genrand_int32, 'rb_genrand_int32');
  ld_p(rb_genrand_real, 'rb_genrand_real');
  ld_p(rb_genrand_ulong_limited, 'rb_genrand_ulong_limited');
  ld_p(rb_get_alloc_func, 'rb_get_alloc_func');
  ld_p(rb_get_argv, 'rb_get_argv');
  ld_p(rb_get_coverages, 'rb_get_coverages');
  ld_p(rb_get_path, 'rb_get_path');
  ld_p(rb_get_path_no_checksafe, 'rb_get_path_no_checksafe');
  ld_p(rb_gets, 'rb_gets');
  ld_p(rb_get_values_at, 'rb_get_values_at');
  ld_p(rb_glob, 'rb_glob');
  ld_p(rb_global_entry, 'rb_global_entry');
  ld_p(rb_global_variable, 'rb_global_variable');
  ld_p(rb_gvar_defined, 'rb_gvar_defined');
  ld_p(rb_gvar_get, 'rb_gvar_get');
  ld_p(rb_gvar_readonly_setter, 'rb_gvar_readonly_setter');
  ld_p(rb_gvar_set, 'rb_gvar_set');
  ld_p(rb_gvar_undef_getter, 'rb_gvar_undef_getter');
  ld_p(rb_gvar_undef_marker, 'rb_gvar_undef_marker');
  ld_p(rb_gvar_undef_setter, 'rb_gvar_undef_setter');
  ld_p(rb_gvar_val_getter, 'rb_gvar_val_getter');
  ld_p(rb_gvar_val_marker, 'rb_gvar_val_marker');
  ld_p(rb_gvar_val_setter, 'rb_gvar_val_setter');
  ld_p(rb_gvar_var_getter, 'rb_gvar_var_getter');
  ld_p(rb_gvar_var_marker, 'rb_gvar_var_marker');
  ld_p(rb_gvar_var_setter, 'rb_gvar_var_setter');
  ld_p(rb_gv_get, 'rb_gv_get');
  ld_p(rb_gv_set, 'rb_gv_set');
  ld_p(rb_hash, 'rb_hash');
  ld_p(rb_hash_aref, 'rb_hash_aref');
  ld_p(rb_hash_aset, 'rb_hash_aset');
  ld_p(rb_hash_delete, 'rb_hash_delete');
  ld_p(rb_hash_delete_if, 'rb_hash_delete_if');
  ld_p(rb_hash_dup, 'rb_hash_dup');
  ld_p(rb_hash_fetch, 'rb_hash_fetch');
  ld_p(rb_hash_foreach, 'rb_hash_foreach');
  ld_p(rb_hash_freeze, 'rb_hash_freeze');
  ld_p(rb_hash_lookup, 'rb_hash_lookup');
  ld_p(rb_hash_lookup2, 'rb_hash_lookup2');
  ld_p(rb_hash_new, 'rb_hash_new');
  ld_p(rb_hash_start, 'rb_hash_start');
  ld_p(rb_hash_tbl, 'rb_hash_tbl');
  ld_p(rb_hash_update_by, 'rb_hash_update_by');
  ld_p(rb_id2name, 'rb_id2name');
  ld_p(rb_id2str, 'rb_id2str');
  ld_p(rb_id_attrset, 'rb_id_attrset');
  ld_p(rb_include_module, 'rb_include_module');
  ld_p(rb_insecure_operation, 'rb_insecure_operation');
  ld_p(rb_inspect, 'rb_inspect');
  ld_p(rb_int2big, 'rb_int2big');
  ld_p(rb_int2inum, 'rb_int2inum');
  ld_p(rb_Integer, 'rb_Integer');
  ld_p(rb_intern, 'rb_intern');
  ld_p(rb_intern2, 'rb_intern2');
  ld_p(rb_intern3, 'rb_intern3');
  ld_p(rb_intern_str, 'rb_intern_str');
  ld_p(rb_interrupt, 'rb_interrupt');
  ld_p(rb_invalid_str, 'rb_invalid_str');
  ld_p(rb_io_addstr, 'rb_io_addstr');
  ld_p(rb_io_ascii8bit_binmode, 'rb_io_ascii8bit_binmode');
  ld_p(rb_io_binmode, 'rb_io_binmode');
  ld_p(rb_io_bufwrite, 'rb_io_bufwrite');
  ld_p(rb_io_check_byte_readable, 'rb_io_check_byte_readable');
  ld_p(rb_io_check_char_readable, 'rb_io_check_char_readable');
  ld_p(rb_io_check_closed, 'rb_io_check_closed');
  ld_p(rb_io_check_initialized, 'rb_io_check_initialized');
  ld_p(rb_io_check_readable, 'rb_io_check_readable');
  ld_p(rb_io_check_writable, 'rb_io_check_writable');
  ld_p(rb_io_close, 'rb_io_close');
  ld_p(rb_io_eof, 'rb_io_eof');
  ld_p(rb_io_extract_encoding_option, 'rb_io_extract_encoding_option');
  ld_p(rb_io_fdopen, 'rb_io_fdopen');
  ld_p(rb_io_flush, 'rb_io_flush');
  ld_p(rb_io_fptr_finalize, 'rb_io_fptr_finalize');
  ld_p(rb_io_getbyte, 'rb_io_getbyte');
  ld_p(rb_io_get_io, 'rb_io_get_io');
  ld_p(rb_io_gets, 'rb_io_gets');
  ld_p(rb_io_get_write_io, 'rb_io_get_write_io');
  ld_p(rb_io_memsize, 'rb_io_memsize');
  ld_p(rb_io_modestr_fmode, 'rb_io_modestr_fmode');
  ld_p(rb_io_modestr_oflags, 'rb_io_modestr_oflags');
  ld_p(rb_io_oflags_fmode, 'rb_io_oflags_fmode');
  ld_p(rb_io_print, 'rb_io_print');
  ld_p(rb_io_printf, 'rb_io_printf');
  ld_p(rb_io_puts, 'rb_io_puts');
  ld_p(rb_io_read_check, 'rb_io_read_check');
  ld_p(rb_io_read_pending, 'rb_io_read_pending');
  ld_p(rb_io_set_nonblock, 'rb_io_set_nonblock');
  ld_p(rb_io_set_write_io, 'rb_io_set_write_io');
  ld_p(rb_io_stdio_file, 'rb_io_stdio_file');
  ld_p(rb_io_synchronized, 'rb_io_synchronized');
  ld_p(rb_io_taint_check, 'rb_io_taint_check');
  ld_p(rb_io_ungetbyte, 'rb_io_ungetbyte');
  ld_p(rb_io_ungetc, 'rb_io_ungetc');
  ld_p(rb_io_wait_readable, 'rb_io_wait_readable');
  ld_p(rb_io_wait_writable, 'rb_io_wait_writable');
  ld_p(rb_io_write, 'rb_io_write');
  ld_p(rb_is_absolute_path, 'rb_is_absolute_path');
  ld_p(rb_isalnum, 'rb_isalnum');
  ld_p(rb_isalpha, 'rb_isalpha');
  ld_p(rb_isblank, 'rb_isblank');
  ld_p(rb_is_class_id, 'rb_is_class_id');
  ld_p(rb_iscntrl, 'rb_iscntrl');
  ld_p(rb_is_const_id, 'rb_is_const_id');
  ld_p(rb_isdigit, 'rb_isdigit');
  ld_p(rb_iseq_build_from_ary, 'rb_iseq_build_from_ary');
  ld_p(rb_iseq_compile, 'rb_iseq_compile');
  ld_p(rb_iseq_compile_node, 'rb_iseq_compile_node');
  ld_p(rb_iseq_compile_with_option, 'rb_iseq_compile_with_option');
  ld_p(rb_iseq_disasm, 'rb_iseq_disasm');
  ld_p(rb_iseq_disasm_insn, 'rb_iseq_disasm_insn');
  ld_p(rb_iseq_eval, 'rb_iseq_eval');
  ld_p(rb_iseq_eval_main, 'rb_iseq_eval_main');
  ld_p(rb_iseq_first_lineno, 'rb_iseq_first_lineno');
  ld_p(rb_iseq_load, 'rb_iseq_load');
  ld_p(rb_iseq_new, 'rb_iseq_new');
  ld_p(rb_iseq_new_main, 'rb_iseq_new_main');
  ld_p(rb_iseq_new_top, 'rb_iseq_new_top');
  ld_p(rb_iseq_new_with_bopt, 'rb_iseq_new_with_bopt');
  ld_p(rb_iseq_new_with_opt, 'rb_iseq_new_with_opt');
  ld_p(rb_iseq_parameters, 'rb_iseq_parameters');
  ld_p(rb_iseq_translate_threaded_code, 'rb_iseq_translate_threaded_code');
  ld_p(rb_isgraph, 'rb_isgraph');
  ld_p(rb_is_instance_id, 'rb_is_instance_id');
  ld_p(rb_is_junk_id, 'rb_is_junk_id');
  ld_p(rb_is_local_id, 'rb_is_local_id');
  ld_p(rb_islower, 'rb_islower');
  ld_p(rb_isprint, 'rb_isprint');
  ld_p(rb_ispunct, 'rb_ispunct');
  ld_p(rb_isspace, 'rb_isspace');
  ld_p(rb_isupper, 'rb_isupper');
  ld_p(rb_isxdigit, 'rb_isxdigit');
  ld_p(rb_iterate, 'rb_iterate');
  ld_p(rb_iter_break, 'rb_iter_break');
  ld_p(rb_ivar_count, 'rb_ivar_count');
  ld_p(rb_ivar_defined, 'rb_ivar_defined');
  ld_p(rb_ivar_foreach, 'rb_ivar_foreach');
  ld_p(rb_ivar_get, 'rb_ivar_get');
  ld_p(rb_ivar_set, 'rb_ivar_set');
  ld_p(rb_iv_get, 'rb_iv_get');
  ld_p(rb_iv_set, 'rb_iv_set');
  ld_p(rb_jump_tag, 'rb_jump_tag');
  ld_p(rb_lastline_get, 'rb_lastline_get');
  ld_p(rb_lastline_set, 'rb_lastline_set');
  ld_p(rb_last_status_get, 'rb_last_status_get');
  ld_p(rb_last_status_set, 'rb_last_status_set');
  ld_p(rb_ll2inum, 'rb_ll2inum');
  ld_p(rb_load, 'rb_load');
  ld_p(rb_loaderror, 'rb_loaderror');
  ld_p(rb_load_file, 'rb_load_file');
  ld_p(rb_load_protect, 'rb_load_protect');
  ld_p(rb_locale_charmap, 'rb_locale_charmap');
  ld_p(rb_locale_encindex, 'rb_locale_encindex');
  ld_p(rb_locale_encoding, 'rb_locale_encoding');
  ld_p(rb_locale_str_new, 'rb_locale_str_new');
  ld_p(rb_locale_str_new_cstr, 'rb_locale_str_new_cstr');
  ld_p(rb_make_backtrace, 'rb_make_backtrace');
  ld_p(rb_make_exception, 'rb_make_exception');
  ld_p(rb_make_metaclass, 'rb_make_metaclass');
  ld_p(rb_mark_generic_ivar, 'rb_mark_generic_ivar');
  ld_p(rb_mark_generic_ivar_tbl, 'rb_mark_generic_ivar_tbl');
  ld_p(rb_mark_hash, 'rb_mark_hash');
  ld_p(rb_mark_set, 'rb_mark_set');
  ld_p(rb_mark_tbl, 'rb_mark_tbl');
  ld_p(rb_marshal_define_compat, 'rb_marshal_define_compat');
  ld_p(rb_marshal_dump, 'rb_marshal_dump');
  ld_p(rb_marshal_load, 'rb_marshal_load');
  ld_p(rb_match_busy, 'rb_match_busy');
  ld_p(rb_memcicmp, 'rb_memcicmp');
  ld_p(rb_memerror, 'rb_memerror');
  ld_p(rb_memhash, 'rb_memhash');
  ld_p(rb_memsearch, 'rb_memsearch');
  ld_p(rb_method_basic_definition_p, 'rb_method_basic_definition_p');
  ld_p(rb_method_boundp, 'rb_method_boundp');
  ld_p(rb_method_call, 'rb_method_call');
  ld_p(rb_method_get_iseq, 'rb_method_get_iseq');
  ld_p(rb_mod_ancestors, 'rb_mod_ancestors');
  ld_p(rb_mod_class_variables, 'rb_mod_class_variables');
  ld_p(rb_mod_constants, 'rb_mod_constants');
  ld_p(rb_mod_const_at, 'rb_mod_const_at');
  ld_p(rb_mod_const_missing, 'rb_mod_const_missing');
  ld_p(rb_mod_const_of, 'rb_mod_const_of');
  ld_p(rb_mod_included_modules, 'rb_mod_included_modules');
  ld_p(rb_mod_include_p, 'rb_mod_include_p');
  ld_p(rb_mod_init_copy, 'rb_mod_init_copy');
  ld_p(rb_mod_method_arity, 'rb_mod_method_arity');
  ld_p(rb_mod_module_eval, 'rb_mod_module_eval');
  ld_p(rb_mod_module_exec, 'rb_mod_module_exec');
  ld_p(rb_mod_name, 'rb_mod_name');
  ld_p(rb_mod_remove_const, 'rb_mod_remove_const');
  ld_p(rb_mod_remove_cvar, 'rb_mod_remove_cvar');
  ld_p(rb_mod_syserr_fail, 'rb_mod_syserr_fail');
  ld_p(rb_mod_syserr_fail_str, 'rb_mod_syserr_fail_str');
  ld_p(rb_mod_sys_fail, 'rb_mod_sys_fail');
  ld_p(rb_mod_sys_fail_str, 'rb_mod_sys_fail_str');
  ld_p(rb_module_new, 'rb_module_new');
  ld_p(rb_mutex_lock, 'rb_mutex_lock');
  ld_p(rb_mutex_locked_p, 'rb_mutex_locked_p');
  ld_p(rb_mutex_new, 'rb_mutex_new');
  ld_p(rb_mutex_sleep, 'rb_mutex_sleep');
  ld_p(rb_mutex_synchronize, 'rb_mutex_synchronize');
  ld_p(rb_mutex_trylock, 'rb_mutex_trylock');
  ld_p(rb_mutex_unlock, 'rb_mutex_unlock');
  ld_p(rb_name_class, 'rb_name_class');
  ld_p(rb_name_error, 'rb_name_error');
  ld_p(rb_need_block, 'rb_need_block');
  ld_p(rb_newobj, 'rb_newobj');
  ld_p(rb_notimplement, 'rb_notimplement');
  ld_p(rb_num2dbl, 'rb_num2dbl');
  ld_p(rb_num2fix, 'rb_num2fix');
  ld_p(rb_num2int, 'rb_num2int');
  ld_p(rb_num2ll, 'rb_num2ll');
  ld_p(rb_num2long, 'rb_num2long');
  ld_p(rb_num2uint, 'rb_num2uint');
  ld_p(rb_num2ull, 'rb_num2ull');
  ld_p(rb_num2ulong, 'rb_num2ulong');
  ld_p(rb_num_coerce_bin, 'rb_num_coerce_bin');
  ld_p(rb_num_coerce_cmp, 'rb_num_coerce_cmp');
  ld_p(rb_num_coerce_relop, 'rb_num_coerce_relop');
  ld_p(rb_num_zerodiv, 'rb_num_zerodiv');
  ld_p(rb_obj_alloc, 'rb_obj_alloc');
  ld_p(rb_obj_as_string, 'rb_obj_as_string');
  ld_p(rb_obj_call_init, 'rb_obj_call_init');
  ld_p(rb_obj_class, 'rb_obj_class');
  ld_p(rb_obj_classname, 'rb_obj_classname');
  ld_p(rb_obj_clone, 'rb_obj_clone');
  ld_p(rb_obj_dup, 'rb_obj_dup');
  ld_p(rb_obj_encoding, 'rb_obj_encoding');
  ld_p(rb_obj_freeze, 'rb_obj_freeze');
  ld_p(rb_obj_frozen_p, 'rb_obj_frozen_p');
  ld_p(rb_obj_id, 'rb_obj_id');
  ld_p(rb_obj_infect, 'rb_obj_infect');
  ld_p(rb_obj_init_copy, 'rb_obj_init_copy');
  ld_p(rb_obj_instance_eval, 'rb_obj_instance_eval');
  ld_p(rb_obj_instance_exec, 'rb_obj_instance_exec');
  ld_p(rb_obj_instance_variables, 'rb_obj_instance_variables');
  ld_p(rb_obj_is_instance_of, 'rb_obj_is_instance_of');
  ld_p(rb_obj_is_kind_of, 'rb_obj_is_kind_of');
  ld_p(rb_obj_is_method, 'rb_obj_is_method');
  ld_p(rb_obj_is_proc, 'rb_obj_is_proc');
  ld_p(rb_obj_method, 'rb_obj_method');
  ld_p(rb_obj_method_arity, 'rb_obj_method_arity');
  ld_p(rb_obj_remove_instance_variable, 'rb_obj_remove_instance_variable');
  ld_p(rb_obj_respond_to, 'rb_obj_respond_to');
  ld_p(rb_obj_singleton_methods, 'rb_obj_singleton_methods');
  ld_p(rb_objspace_data_type_memsize, 'rb_objspace_data_type_memsize');
  ld_p(rb_objspace_data_type_name, 'rb_objspace_data_type_name');
  ld_p(rb_objspace_each_objects, 'rb_objspace_each_objects');
  ld_p(rb_obj_taint, 'rb_obj_taint');
  ld_p(rb_obj_tainted, 'rb_obj_tainted');
  ld_p(rb_obj_trust, 'rb_obj_trust');
  ld_p(rb_obj_untaint, 'rb_obj_untaint');
  ld_p(rb_obj_untrust, 'rb_obj_untrust');
  ld_p(rb_obj_untrusted, 'rb_obj_untrusted');
  ld_p(rb_p, 'rb_p');
  ld_p(rb_parser_append_print, 'rb_parser_append_print');
  ld_p(rb_parser_calloc, 'rb_parser_calloc');
  ld_p(rb_parser_compile_cstr, 'rb_parser_compile_cstr');
  ld_p(rb_parser_compile_file, 'rb_parser_compile_file');
  ld_p(rb_parser_compile_string, 'rb_parser_compile_string');
  ld_p(rb_parser_dump_tree, 'rb_parser_dump_tree');
  ld_p(rb_parser_encoding, 'rb_parser_encoding');
  ld_p(rb_parser_end_seen_p, 'rb_parser_end_seen_p');
  ld_p(rb_parser_free, 'rb_parser_free');
  ld_p(rb_parser_get_yydebug, 'rb_parser_get_yydebug');
  ld_p(rb_parser_malloc, 'rb_parser_malloc');
  ld_p(rb_parser_new, 'rb_parser_new');
  ld_p(rb_parser_realloc, 'rb_parser_realloc');
  ld_p(rb_parser_set_yydebug, 'rb_parser_set_yydebug');
  ld_p(rb_parser_while_loop, 'rb_parser_while_loop');
  ld_p(rb_path2class, 'rb_path2class');
  ld_p(rb_path_check, 'rb_path_check');
  ld_p(rb_path_to_class, 'rb_path_to_class');
  ld_p(rb_pipe, 'rb_pipe');
  ld_p(rb_proc_arity, 'rb_proc_arity');
  ld_p(rb_proc_call, 'rb_proc_call');
  ld_p(rb_proc_call_with_block, 'rb_proc_call_with_block');
  ld_p(rb_proc_exec, 'rb_proc_exec');
  ld_p(rb_proc_exec_n, 'rb_proc_exec_n');
  ld_p(rb_proc_get_iseq, 'rb_proc_get_iseq');
  ld_p(rb_proc_lambda_p, 'rb_proc_lambda_p');
  ld_p(rb_proc_new, 'rb_proc_new');
  ld_p(rb_proc_times, 'rb_proc_times');
  ld_p(rb_protect, 'rb_protect');
  ld_p(rb_provide, 'rb_provide');
  ld_p(rb_provided, 'rb_provided');
  ld_p(rb_quad_pack, 'rb_quad_pack');
  ld_p(rb_quad_unpack, 'rb_quad_unpack');
  ld_p(rb_raise, 'rb_raise');
  ld_p(rb_random_bytes, 'rb_random_bytes');
  ld_p(rb_random_int32, 'rb_random_int32');
  ld_p(rb_random_real, 'rb_random_real');
  ld_p(rb_range_beg_len, 'rb_range_beg_len');
  ld_p(rb_range_new, 'rb_range_new');
  ld_p(rb_range_values, 'rb_range_values');
  ld_p(rb_Rational, 'rb_Rational');
  ld_p(rb_rational_new, 'rb_rational_new');
  ld_p(rb_rational_raw, 'rb_rational_raw');
  ld_p(rb_read_check, 'rb_read_check');
  ld_p(rb_reg_adjust_startpos, 'rb_reg_adjust_startpos');
  ld_p(rb_reg_alloc, 'rb_reg_alloc');
  ld_p(rb_reg_backref_number, 'rb_reg_backref_number');
  ld_p(rb_reg_init_str, 'rb_reg_init_str');
  ld_p(rb_register_transcoder, 'rb_register_transcoder');
  ld_p(rb_reg_last_match, 'rb_reg_last_match');
  ld_p(rb_reg_match, 'rb_reg_match');
  ld_p(rb_reg_match2, 'rb_reg_match2');
  ld_p(rb_reg_match_last, 'rb_reg_match_last');
  ld_p(rb_reg_match_post, 'rb_reg_match_post');
  ld_p(rb_reg_match_pre, 'rb_reg_match_pre');
  ld_p(rb_reg_new, 'rb_reg_new');
  ld_p(rb_reg_new_str, 'rb_reg_new_str');
  ld_p(rb_reg_nth_defined, 'rb_reg_nth_defined');
  ld_p(rb_reg_nth_match, 'rb_reg_nth_match');
  ld_p(rb_reg_options, 'rb_reg_options');
  ld_p(rb_reg_prepare_re, 'rb_reg_prepare_re');
  ld_p(rb_reg_quote, 'rb_reg_quote');
  ld_p(rb_reg_regcomp, 'rb_reg_regcomp');
  ld_p(rb_reg_regsub, 'rb_reg_regsub');
  ld_p(rb_reg_search, 'rb_reg_search');
  ld_p(rb_remove_event_hook, 'rb_remove_event_hook');
  ld_p(rb_remove_method, 'rb_remove_method');
  ld_p(rb_remove_method_id, 'rb_remove_method_id');
  ld_p(rb_require, 'rb_require');
  ld_p(rb_require_safe, 'rb_require_safe');
  ld_p(rb_rescue, 'rb_rescue');
  ld_p(rb_rescue2, 'rb_rescue2');
  ld_p(rb_reserved_fd_p, 'rb_reserved_fd_p');
  ld_p(rb_reserved_word, 'rb_reserved_word');
  ld_p(rb_reset_coverages, 'rb_reset_coverages');
  ld_p(rb_reset_random_seed, 'rb_reset_random_seed');
  ld_p(rb_respond_to, 'rb_respond_to');
  ld_p(rb_ruby_debug_ptr, 'rb_ruby_debug_ptr');
  ld_p(rb_ruby_verbose_ptr, 'rb_ruby_verbose_ptr');
  ld_p(rb_run_exec_options, 'rb_run_exec_options');
  ld_p(rb_run_exec_options_err, 'rb_run_exec_options_err');
  ld_p(rb_safe_level, 'rb_safe_level');
  ld_p(rb_scan_args, 'rb_scan_args');
  ld_p(rb_secure, 'rb_secure');
  ld_p(rb_secure_update, 'rb_secure_update');
  ld_p(rb_set_class_path, 'rb_set_class_path');
  ld_p(rb_set_class_path_string, 'rb_set_class_path_string');
  ld_p(rb_set_coverages, 'rb_set_coverages');
  ld_p(rb_set_end_proc, 'rb_set_end_proc');
  ld_p(rb_set_errinfo, 'rb_set_errinfo');
  ld_p(rb_set_safe_level, 'rb_set_safe_level');
  ld_p(rb_set_safe_level_force, 'rb_set_safe_level_force');
  ld_p(rb_singleton_class, 'rb_singleton_class');
  ld_p(rb_singleton_class_attached, 'rb_singleton_class_attached');
  ld_p(rb_singleton_class_clone, 'rb_singleton_class_clone');
  ld_p(rb_sourcefile, 'rb_sourcefile');
  ld_p(rb_sourceline, 'rb_sourceline');
  ld_p(rb_spawn, 'rb_spawn');
  ld_p(rb_spawn_err, 'rb_spawn_err');
  ld_p(rb_sprintf, 'rb_sprintf');
  ld_p(rb_str2inum, 'rb_str2inum');
  ld_p(rb_str_append, 'rb_str_append');
  ld_p(rb_str_associate, 'rb_str_associate');
  ld_p(rb_str_associated, 'rb_str_associated');
  ld_p(rb_str_buf_append, 'rb_str_buf_append');
  ld_p(rb_str_buf_cat, 'rb_str_buf_cat');
  ld_p(rb_str_buf_cat2, 'rb_str_buf_cat2');
  ld_p(rb_str_buf_cat_ascii, 'rb_str_buf_cat_ascii');
  ld_p(rb_str_buf_new, 'rb_str_buf_new');
  ld_p(rb_str_buf_new2, 'rb_str_buf_new2');
  ld_p(rb_str_buf_new_cstr, 'rb_str_buf_new_cstr');
  ld_p(rb_str_capacity, 'rb_str_capacity');
  ld_p(rb_str_cat, 'rb_str_cat');
  ld_p(rb_str_cat2, 'rb_str_cat2');
  ld_p(rb_str_catf, 'rb_str_catf');
  ld_p(rb_str_cmp, 'rb_str_cmp');
  ld_p(rb_str_coderange_scan_restartable, 'rb_str_coderange_scan_restartable');
  ld_p(rb_str_comparable, 'rb_str_comparable');
  ld_p(rb_str_concat, 'rb_str_concat');
  ld_p(rb_str_conv_enc, 'rb_str_conv_enc');
  ld_p(rb_str_conv_enc_opts, 'rb_str_conv_enc_opts');
  ld_p(rb_str_drop_bytes, 'rb_str_drop_bytes');
  ld_p(rb_str_dump, 'rb_str_dump');
  ld_p(rb_str_dup, 'rb_str_dup');
  ld_p(rb_str_dup_frozen, 'rb_str_dup_frozen');
  ld_p(rb_str_ellipsize, 'rb_str_ellipsize');
  ld_p(rb_str_encode, 'rb_str_encode');
  ld_p(rb_str_encode_ospath, 'rb_str_encode_ospath');
  ld_p(rb_str_equal, 'rb_str_equal');
  ld_p(rb_str_export, 'rb_str_export');
  ld_p(rb_str_export_locale, 'rb_str_export_locale');
  ld_p(rb_str_export_to_enc, 'rb_str_export_to_enc');
  ld_p(rb_str_format, 'rb_str_format');
  ld_p(rb_str_free, 'rb_str_free');
  ld_p(rb_str_freeze, 'rb_str_freeze');
  ld_p(rb_str_hash, 'rb_str_hash');
  ld_p(rb_str_hash_cmp, 'rb_str_hash_cmp');
  ld_p(rb_String, 'rb_String');
  ld_p(rb_string_value, 'rb_string_value');
  ld_p(rb_string_value_cstr, 'rb_string_value_cstr');
  ld_p(rb_string_value_ptr, 'rb_string_value_ptr');
  ld_p(rb_str_inspect, 'rb_str_inspect');
  ld_p(rb_str_intern, 'rb_str_intern');
  ld_p(rb_str_length, 'rb_str_length');
  ld_p(rb_str_locktmp, 'rb_str_locktmp');
  ld_p(rb_str_memsize, 'rb_str_memsize');
  ld_p(rb_str_modify, 'rb_str_modify');
  ld_p(rb_str_modify_expand, 'rb_str_modify_expand');
  ld_p(rb_str_new, 'rb_str_new');
  ld_p(rb_str_new2, 'rb_str_new2');
  ld_p(rb_str_new3, 'rb_str_new3');
  ld_p(rb_str_new4, 'rb_str_new4');
  ld_p(rb_str_new5, 'rb_str_new5');
  ld_p(rb_str_new_cstr, 'rb_str_new_cstr');
  ld_p(rb_str_new_frozen, 'rb_str_new_frozen');
  ld_p(rb_str_new_shared, 'rb_str_new_shared');
  ld_p(rb_str_new_with_class, 'rb_str_new_with_class');
  ld_p(rb_str_offset, 'rb_str_offset');
  ld_p(rb_str_plus, 'rb_str_plus');
  ld_p(rb_str_replace, 'rb_str_replace');
  ld_p(rb_str_resize, 'rb_str_resize');
  ld_p(rb_str_resurrect, 'rb_str_resurrect');
  ld_p(rb_str_set_len, 'rb_str_set_len');
  ld_p(rb_str_setter, 'rb_str_setter');
  ld_p(rb_str_shared_replace, 'rb_str_shared_replace');
  ld_p(rb_str_split, 'rb_str_split');
  ld_p(rb_str_strlen, 'rb_str_strlen');
  ld_p(rb_str_sublen, 'rb_str_sublen');
  ld_p(rb_str_subseq, 'rb_str_subseq');
  ld_p(rb_str_substr, 'rb_str_substr');
  ld_p(rb_str_succ, 'rb_str_succ');
  ld_p(rb_str_times, 'rb_str_times');
  ld_p(rb_str_tmp_new, 'rb_str_tmp_new');
  ld_p(rb_str_to_dbl, 'rb_str_to_dbl');
  ld_p(rb_str_to_inum, 'rb_str_to_inum');
  ld_p(rb_str_to_str, 'rb_str_to_str');
  ld_p(rb_struct_alloc, 'rb_struct_alloc');
  ld_p(rb_struct_alloc_noinit, 'rb_struct_alloc_noinit');
  ld_p(rb_struct_aref, 'rb_struct_aref');
  ld_p(rb_struct_aset, 'rb_struct_aset');
  ld_p(rb_struct_define, 'rb_struct_define');
  ld_p(rb_struct_define_without_accessor, 'rb_struct_define_without_accessor');
  ld_p(rb_struct_getmember, 'rb_struct_getmember');
  ld_p(rb_struct_initialize, 'rb_struct_initialize');
  ld_p(rb_struct_iv_get, 'rb_struct_iv_get');
  ld_p(rb_struct_members, 'rb_struct_members');
  ld_p(rb_struct_new, 'rb_struct_new');
  ld_p(rb_struct_s_members, 'rb_struct_s_members');
  ld_p(rb_str_unlocktmp, 'rb_str_unlocktmp');
  ld_p(rb_str_update, 'rb_str_update');
  ld_p(rb_sym_all_symbols, 'rb_sym_all_symbols');
  ld_p(rb_symname_p, 'rb_symname_p');
  ld_p(rb_sym_to_s, 'rb_sym_to_s');
  ld_p(rb_syserr_fail, 'rb_syserr_fail');
  ld_p(rb_syserr_fail_str, 'rb_syserr_fail_str');
  ld_p(rb_syserr_new, 'rb_syserr_new');
  ld_p(rb_syserr_new_str, 'rb_syserr_new_str');
  ld_p(rb_sys_fail, 'rb_sys_fail');
  ld_p(rb_sys_fail_str, 'rb_sys_fail_str');
  ld_p(rb_syswait, 'rb_syswait');
  ld_p(rb_sys_warning, 'rb_sys_warning');
  ld_p(rb_tainted_str_new, 'rb_tainted_str_new');
  ld_p(rb_tainted_str_new2, 'rb_tainted_str_new2');
  ld_p(rb_tainted_str_new_cstr, 'rb_tainted_str_new_cstr');
  ld_p(rb_thread_alone, 'rb_thread_alone');
  ld_p(rb_thread_atfork, 'rb_thread_atfork');
  ld_p(rb_thread_atfork_before_exec, 'rb_thread_atfork_before_exec');
  ld_p(rb_thread_blocking_region, 'rb_thread_blocking_region');
  ld_p(rb_thread_call_with_gvl, 'rb_thread_call_with_gvl');
  ld_p(rb_thread_call_without_gvl, 'rb_thread_call_without_gvl');
  ld_p(rb_thread_check_ints, 'rb_thread_check_ints');
  ld_p(rb_thread_check_trap_pending, 'rb_thread_check_trap_pending');
  ld_p(rb_thread_create, 'rb_thread_create');
  ld_p(rb_thread_current, 'rb_thread_current');
  ld_p(rb_thread_fd_close, 'rb_thread_fd_close');
  ld_p(rb_thread_fd_select, 'rb_thread_fd_select');
  ld_p(rb_thread_fd_writable, 'rb_thread_fd_writable');
  ld_p(rb_thread_interrupted, 'rb_thread_interrupted');
  ld_p(rb_thread_io_blocking_region, 'rb_thread_io_blocking_region');
  ld_p(rb_thread_kill, 'rb_thread_kill');
  ld_p(rb_thread_local_aref, 'rb_thread_local_aref');
  ld_p(rb_thread_local_aset, 'rb_thread_local_aset');
  ld_p(rb_thread_main, 'rb_thread_main');
  ld_p(rb_thread_polling, 'rb_thread_polling');
  ld_p(rb_thread_run, 'rb_thread_run');
  ld_p(rb_thread_schedule, 'rb_thread_schedule');
  ld_p(rb_thread_select, 'rb_thread_select');
  ld_p(rb_thread_sleep, 'rb_thread_sleep');
  ld_p(rb_thread_sleep_forever, 'rb_thread_sleep_forever');
  ld_p(rb_thread_stop, 'rb_thread_stop');
  ld_p(rb_thread_wait_fd, 'rb_thread_wait_fd');
  ld_p(rb_thread_wait_for, 'rb_thread_wait_for');
  ld_p(rb_thread_wakeup, 'rb_thread_wakeup');
  ld_p(rb_thread_wakeup_alive, 'rb_thread_wakeup_alive');
  ld_p(rb_throw, 'rb_throw');
  ld_p(rb_throw_obj, 'rb_throw_obj');
  ld_p(rb_time_interval, 'rb_time_interval');
  ld_p(rb_time_nano_new, 'rb_time_nano_new');
  ld_p(rb_time_new, 'rb_time_new');
  ld_p(rb_time_num_new, 'rb_time_num_new');
  ld_p(rb_time_succ, 'rb_time_succ');
  ld_p(rb_time_timespec, 'rb_time_timespec');
  ld_p(rb_time_timeval, 'rb_time_timeval');
  ld_p(rb_to_encoding, 'rb_to_encoding');
  ld_p(rb_to_encoding_index, 'rb_to_encoding_index');
  ld_p(rb_to_float, 'rb_to_float');
  ld_p(rb_to_id, 'rb_to_id');
  ld_p(rb_to_int, 'rb_to_int');
  ld_p(rb_tolower, 'rb_tolower');
  ld_p(rb_toupper, 'rb_toupper');
  ld_p(rb_trap_exit, 'rb_trap_exit');
  ld_p(rb_typeddata_inherited_p, 'rb_typeddata_inherited_p');
  ld_p(rb_typeddata_is_kind_of, 'rb_typeddata_is_kind_of');
  ld_p(rb_uint2big, 'rb_uint2big');
  ld_p(rb_uint2inum, 'rb_uint2inum');
  ld_p(rb_ull2inum, 'rb_ull2inum');
  ld_p(rb_undef, 'rb_undef');
  ld_p(rb_undef_alloc_func, 'rb_undef_alloc_func');
  ld_p(rb_undef_method, 'rb_undef_method');
  ld_p(rb_update_max_fd, 'rb_update_max_fd');
  ld_p(rb_usascii_encindex, 'rb_usascii_encindex');
  ld_p(rb_usascii_encoding, 'rb_usascii_encoding');
  ld_p(rb_usascii_str_new, 'rb_usascii_str_new');
  ld_p(rb_usascii_str_new2, 'rb_usascii_str_new2');
  ld_p(rb_usascii_str_new_cstr, 'rb_usascii_str_new_cstr');
  ld_p(rb_utf8_encindex, 'rb_utf8_encindex');
  ld_p(rb_utf8_encoding, 'rb_utf8_encoding');
  ld_p(rb_wait_for_single_fd, 'rb_wait_for_single_fd');
  ld_p(rb_waitpid, 'rb_waitpid');
  ld_p(rb_warn, 'rb_warn');
  ld_p(rb_warning, 'rb_warning');
  ld_p(rb_write_error, 'rb_write_error');
  ld_p(rb_write_error2, 'rb_write_error2');
  ld_p(rb_yield, 'rb_yield');
  ld_p(rb_yield_splat, 'rb_yield_splat');
  ld_p(rb_yield_values, 'rb_yield_values');
  ld_p(rb_yield_values2, 'rb_yield_values2');
  ld_p(ruby_brace_glob, 'ruby_brace_glob');
  ld_p(ruby_cleanup, 'ruby_cleanup');
  ld_p(ruby_debug_breakpoint, 'ruby_debug_breakpoint');
  ld_p(ruby_debug_print_id, 'ruby_debug_print_id');
  ld_p(ruby_debug_print_indent, 'ruby_debug_print_indent');
  ld_p(ruby_debug_print_node, 'ruby_debug_print_node');
  ld_p(ruby_debug_print_value, 'ruby_debug_print_value');
  ld_p(ruby_default_signal, 'ruby_default_signal');
  ld_p(ruby_each_words, 'ruby_each_words');
  ld_p(ruby_enc_find_basename, 'ruby_enc_find_basename');
  ld_p(ruby_enc_find_extname, 'ruby_enc_find_extname');
  ld_p(ruby_exec_node, 'ruby_exec_node');
  ld_p(ruby_executable_node, 'ruby_executable_node');
  ld_p(ruby_finalize, 'ruby_finalize');
  ld_p(ruby_getcwd, 'ruby_getcwd');
  ld_p(ruby_glob, 'ruby_glob');
  ld_p(ruby_incpush, 'ruby_incpush');
  ld_p(ruby_init, 'ruby_init');
  ld_p(ruby_Init_Continuation_body, 'ruby_Init_Continuation_body');
  ld_p(ruby_init_ext, 'ruby_init_ext');
  ld_p(ruby_Init_Fiber_as_Coroutine, 'ruby_Init_Fiber_as_Coroutine');
  ld_p(ruby_init_loadpath, 'ruby_init_loadpath');
  ld_p(ruby_init_stack, 'ruby_init_stack');
  ld_p(ruby_native_thread_p, 'ruby_native_thread_p');
  ld_p(ruby_node_name, 'ruby_node_name');
  ld_p(ruby_options, 'ruby_options');
  ld_p(ruby_process_options, 'ruby_process_options');
  ld_p(ruby_prog_init, 'ruby_prog_init');
  ld_p(ruby_qsort, 'ruby_qsort');
  ld_p(ruby_run_node, 'ruby_run_node');
  ld_p(ruby_scan_hex, 'ruby_scan_hex');
  ld_p(ruby_scan_oct, 'ruby_scan_oct');
  ld_p(ruby_script, 'ruby_script');
  ld_p(ruby_set_argv, 'ruby_set_argv');
  ld_p(ruby_set_debug_option, 'ruby_set_debug_option');
  ld_p(ruby_setenv, 'ruby_setenv');
  ld_p(ruby_show_copyright, 'ruby_show_copyright');
  ld_p(ruby_show_version, 'ruby_show_version');
  ld_p(ruby_sig_finalize, 'ruby_sig_finalize');
  ld_p(ruby_signal_name, 'ruby_signal_name');
  ld_p(ruby_snprintf, 'ruby_snprintf');
  ld_p(ruby_stack_check, 'ruby_stack_check');
  ld_p(ruby_stack_length, 'ruby_stack_length');
  ld_p(ruby_stop, 'ruby_stop');
  ld_p(ruby_strdup, 'ruby_strdup');
  ld_p(ruby_strtod, 'ruby_strtod');
  ld_p(ruby_strtoul, 'ruby_strtoul');
  ld_p(ruby_sysinit, 'ruby_sysinit');
  ld_p(ruby_unsetenv, 'ruby_unsetenv');
  ld_p(ruby_vm_at_exit, 'ruby_vm_at_exit');
  ld_p(ruby_vm_destruct, 'ruby_vm_destruct');
  ld_p(ruby_xcalloc, 'ruby_xcalloc');
  ld_p(ruby_xfree, 'ruby_xfree');
  ld_p(ruby_xmalloc, 'ruby_xmalloc');
  ld_p(ruby_xmalloc2, 'ruby_xmalloc2');
  ld_p(ruby_xrealloc, 'ruby_xrealloc');
  ld_p(ruby_xrealloc2, 'ruby_xrealloc2');
  // Ruby 1.9
  // load 1.9 functions
  ld_p(rb_barrier_destroy, 'rb_barrier_destroy');
  ld_p(rb_barrier_new, 'rb_barrier_new');
  ld_p(rb_barrier_release, 'rb_barrier_release');
  ld_p(rb_barrier_wait, 'rb_barrier_wait');
  ld_p(rb_disable_interrupt, 'rb_disable_interrupt');
  ld_p(rb_enable_interrupt, 'rb_enable_interrupt');
  ld_p(rb_file_const, 'rb_file_const');
  ld_p(rb_file_load_ok, 'rb_file_load_ok');
  ld_p(rb_float_new, 'rb_float_new');
  ld_p(rb_gc_mark_parser, 'rb_gc_mark_parser');
  ld_p(rb_gc_mark_symbols, 'rb_gc_mark_symbols');
  ld_p(rb_gc_mark_threads, 'rb_gc_mark_threads');
  ld_p(rb_load_fail, 'rb_load_fail');
  ld_p(rb_mark_end_proc, 'rb_mark_end_proc');
  ld_p(rb_vm_get_sourceline, 'rb_vm_get_sourceline');
  ld_p(rb_vm_make_env_object, 'rb_vm_make_env_object');
  // Ruby 2.0
  // load 2.0 functions
  ld_p(rb_funcall_with_block, 'rb_funcall_with_block');
  ld_p(rb_method_call_with_block, 'rb_method_call_with_block');
  ld_p(rb_ary_rotate, 'rb_ary_rotate');
  ld_p(rb_ary_shared_with_p, 'rb_ary_shared_with_p');
  ld_p(rb_check_copyable, 'rb_check_copyable');
  ld_p(rb_check_id, 'rb_check_id');
  ld_p(rb_check_id_cstr, 'rb_check_id_cstr');
  ld_p(rb_check_to_int, 'rb_check_to_int');
  ld_p(rb_check_trusted, 'rb_check_trusted');
  ld_p(rb_cloexec_dup, 'rb_cloexec_dup');
  ld_p(rb_cloexec_dup2, 'rb_cloexec_dup2');
  ld_p(rb_cloexec_fcntl_dupfd, 'rb_cloexec_fcntl_dupfd');
  ld_p(rb_cloexec_open, 'rb_cloexec_open');
  ld_p(rb_debug_inspector_backtrace_locations, 'rb_debug_inspector_backtrace_locations');
  ld_p(rb_debug_inspector_frame_binding_get, 'rb_debug_inspector_frame_binding_get');
  ld_p(rb_debug_inspector_frame_class_get, 'rb_debug_inspector_frame_class_get');
  ld_p(rb_debug_inspector_frame_iseq_get, 'rb_debug_inspector_frame_iseq_get');
  ld_p(rb_debug_inspector_frame_self_get, 'rb_debug_inspector_frame_self_get');
  ld_p(rb_debug_inspector_open, 'rb_debug_inspector_open');
  ld_p(rb_encdb_set_unicode, 'rb_encdb_set_unicode');
  ld_p(rb_enc_raise, 'rb_enc_raise');
  ld_p(rb_enumeratorize_with_size, 'rb_enumeratorize_with_size');
  ld_p(rb_enum_values_pack, 'rb_enum_values_pack');
  ld_p(rb_error_arity, 'rb_error_arity');
  ld_p(rb_error_untrusted, 'rb_error_untrusted');
  ld_p(rb_execarg_addopt, 'rb_execarg_addopt');
  ld_p(rb_execarg_extract_options, 'rb_execarg_extract_options');
  ld_p(rb_execarg_fixup, 'rb_execarg_fixup');
  ld_p(rb_execarg_get, 'rb_execarg_get');
  ld_p(rb_execarg_init, 'rb_execarg_init');
  ld_p(rb_execarg_new, 'rb_execarg_new');
  ld_p(rb_execarg_run_options, 'rb_execarg_run_options');
  ld_p(rb_execarg_setenv, 'rb_execarg_setenv');
  ld_p(rb_exec_async_signal_safe, 'rb_exec_async_signal_safe');
  ld_p(rb_fd_fix_cloexec, 'rb_fd_fix_cloexec');
  ld_p(rb_find_encoding, 'rb_find_encoding');
  ld_p(rb_fix2short, 'rb_fix2short');
  ld_p(rb_fix2ushort, 'rb_fix2ushort');
  ld_p(rb_float_new_in_heap, 'rb_float_new_in_heap');
  ld_p(rb_fork_async_signal_safe, 'rb_fork_async_signal_safe');
  ld_p(rb__Hash, 'rb_Hash');
  ld_p(rb_include_class_new, 'rb_include_class_new');
  ld_p(rb_io_check_io, 'rb_io_check_io');
  ld_p(rb_is_attrset_id, 'rb_is_attrset_id');
  ld_p(rb_iseq_compile_on_base, 'rb_iseq_compile_on_base');
  ld_p(rb_iseq_line_no, 'rb_iseq_line_no');
  ld_p(rb_iseq_line_trace_all, 'rb_iseq_line_trace_all');
  ld_p(rb_iseq_line_trace_each, 'rb_iseq_line_trace_each');
  ld_p(rb_iseq_line_trace_specify, 'rb_iseq_line_trace_specify');
  ld_p(rb_is_global_id, 'rb_is_global_id');
  ld_p(rb_iter_break_value, 'rb_iter_break_value');
  ld_p(rb_loaderror_with_path, 'rb_loaderror_with_path');
  ld_p(rb_maygvl_fd_fix_cloexec, 'rb_maygvl_fd_fix_cloexec');
  ld_p(rb_must_asciicompat, 'rb_must_asciicompat');
  ld_p(rb_name_error_str, 'rb_name_error_str');
  ld_p(rb_newobj_of, 'rb_newobj_of');
  ld_p(rb_num2short, 'rb_num2short');
  ld_p(rb_num2ushort, 'rb_num2ushort');
  ld_p(rb_num_coerce_bit, 'rb_num_coerce_bit');
  ld_p(rb_objspace_internal_object_p, 'rb_objspace_internal_object_p');
  ld_p(rb_objspace_markable_object_p, 'rb_objspace_markable_object_p');
  ld_p(rb_objspace_reachable_objects_from, 'rb_objspace_reachable_objects_from');
  ld_p(rb_prepend_module, 'rb_prepend_module');
  ld_p(rb_random_ulong_limited, 'rb_random_ulong_limited');
  ld_p(rb_remove_event_hook_with_data, 'rb_remove_event_hook_with_data');
  ld_p(rb_thread_add_event_hook, 'rb_thread_add_event_hook');
  ld_p(rb_thread_call_without_gvl2, 'rb_thread_call_without_gvl2');
  ld_p(rb_thread_remove_event_hook, 'rb_thread_remove_event_hook');
  ld_p(rb_thread_remove_event_hook_with_data, 'rb_thread_remove_event_hook_with_data');
  ld_p(rb_tracearg_binding, 'rb_tracearg_binding');
  ld_p(rb_tracearg_defined_class, 'rb_tracearg_defined_class');
  ld_p(rb_tracearg_event, 'rb_tracearg_event');
  ld_p(rb_tracearg_from_tracepoint, 'rb_tracearg_from_tracepoint');
  ld_p(rb_tracearg_lineno, 'rb_tracearg_lineno');
  ld_p(rb_tracearg_method_id, 'rb_tracearg_method_id');
  ld_p(rb_tracearg_path, 'rb_tracearg_path');
  ld_p(rb_tracearg_raised_exception, 'rb_tracearg_raised_exception');
  ld_p(rb_tracearg_return_value, 'rb_tracearg_return_value');
  ld_p(rb_tracearg_self, 'rb_tracearg_self');
  ld_p(rb_tracepoint_disable, 'rb_tracepoint_disable');
  ld_p(rb_tracepoint_enable, 'rb_tracepoint_enable');
  ld_p(rb_tracepoint_enabled_p, 'rb_tracepoint_enabled_p');
  ld_p(rb_tracepoint_new, 'rb_tracepoint_new');
  ld_p(ruby_set_script_name, 'ruby_set_script_name');
  ld_p(ruby_setup, 'ruby_setup');
  // set variant
  if rb_float_new <> nil
     then p_rb_float_new := rb_float_new
     else p_rb_float_new := rb_float_new_in_heap;
 end;

procedure load_vars; local;
 begin
  // load common variables
  ld_v(rb_cArray, 'rb_cArray');
  ld_v(rb_cBasicObject, 'rb_cBasicObject');
  ld_v(rb_cBignum, 'rb_cBignum');
  ld_v(rb_cBinding, 'rb_cBinding');
  ld_v(rb_cClass, 'rb_cClass');
  ld_v(rb_cComplex, 'rb_cComplex');
  ld_v(rb_cData, 'rb_cData');
  ld_v(rb_cDir, 'rb_cDir');
  ld_v(rb_cEncoding, 'rb_cEncoding');
  ld_v(rb_cEnumerator, 'rb_cEnumerator');
  ld_v(rb_cEnv, 'rb_cEnv');
  ld_v(rb_cFalseClass, 'rb_cFalseClass');
  ld_v(rb_cFile, 'rb_cFile');
  ld_v(rb_cFixnum, 'rb_cFixnum');
  ld_v(rb_cFloat, 'rb_cFloat');
  ld_v(rb_cHash, 'rb_cHash');
  ld_v(rb_cInteger, 'rb_cInteger');
  ld_v(rb_cIO, 'rb_cIO');
  ld_v(rb_cISeq, 'rb_cISeq');
  ld_v(rb_cMatch, 'rb_cMatch');
  ld_v(rb_cMethod, 'rb_cMethod');
  ld_v(rb_cModule, 'rb_cModule');
  ld_v(rb_cNameErrorMesg, 'rb_cNameErrorMesg');
  ld_v(rb_cNilClass, 'rb_cNilClass');
  ld_v(rb_cNumeric, 'rb_cNumeric');
  ld_v(rb_cObject, 'rb_cObject');
  ld_v(rb_cProc, 'rb_cProc');
  ld_v(rb_cRandom, 'rb_cRandom');
  ld_v(rb_cRange, 'rb_cRange');
  ld_v(rb_cRational, 'rb_cRational');
  ld_v(rb_cRegexp, 'rb_cRegexp');
  ld_v(rb_cRubyVM, 'rb_cRubyVM');
  ld_v(rb_cStat, 'rb_cStat');
  ld_v(rb_cString, 'rb_cString');
  ld_v(rb_cStruct, 'rb_cStruct');
  ld_v(rb_cSymbol, 'rb_cSymbol');
  ld_v(rb_cThread, 'rb_cThread');
  ld_v(rb_cTime, 'rb_cTime');
  ld_v(rb_cTrueClass, 'rb_cTrueClass');
  ld_v(rb_cUnboundMethod, 'rb_cUnboundMethod');
  ld_v(rb_eArgError, 'rb_eArgError');
  ld_v(rb_eEncCompatError, 'rb_eEncCompatError');
  ld_v(rb_eEncodingError, 'rb_eEncodingError');
  ld_v(rb_eEOFError, 'rb_eEOFError');
  ld_v(rb_eException, 'rb_eException');
  ld_v(rb_eFatal, 'rb_eFatal');
  ld_v(rb_eFloatDomainError, 'rb_eFloatDomainError');
  ld_v(rb_eIndexError, 'rb_eIndexError');
  ld_v(rb_eInterrupt, 'rb_eInterrupt');
  ld_v(rb_eIOError, 'rb_eIOError');
  ld_v(rb_eKeyError, 'rb_eKeyError');
  ld_v(rb_eLoadError, 'rb_eLoadError');
  ld_v(rb_eLocalJumpError, 'rb_eLocalJumpError');
  ld_v(rb_eMathDomainError, 'rb_eMathDomainError');
  ld_v(rb_eNameError, 'rb_eNameError');
  ld_v(rb_eNoMemError, 'rb_eNoMemError');
  ld_v(rb_eNoMethodError, 'rb_eNoMethodError');
  ld_v(rb_eNotImpError, 'rb_eNotImpError');
  ld_v(rb_eRangeError, 'rb_eRangeError');
  ld_v(rb_eRegexpError, 'rb_eRegexpError');
  ld_v(rb_eRuntimeError, 'rb_eRuntimeError');
  ld_v(rb_eScriptError, 'rb_eScriptError');
  ld_v(rb_eSecurityError, 'rb_eSecurityError');
  ld_v(rb_eSignal, 'rb_eSignal');
  ld_v(rb_eStandardError, 'rb_eStandardError');
  ld_v(rb_eStopIteration, 'rb_eStopIteration');
  ld_v(rb_eSyntaxError, 'rb_eSyntaxError');
  ld_v(rb_eSysStackError, 'rb_eSysStackError');
  ld_v(rb_eSystemCallError, 'rb_eSystemCallError');
  ld_v(rb_eSystemExit, 'rb_eSystemExit');
  ld_v(rb_eThreadError, 'rb_eThreadError');
  ld_v(rb_eTypeError, 'rb_eTypeError');
  ld_v(rb_eZeroDivError, 'rb_eZeroDivError');
  ld_v(rb_mComparable, 'rb_mComparable');
  ld_v(rb_mEnumerable, 'rb_mEnumerable');
  ld_v(rb_mErrno, 'rb_mErrno');
  ld_v(rb_mFileTest, 'rb_mFileTest');
  ld_v(rb_mGC, 'rb_mGC');
  ld_v(rb_mKernel, 'rb_mKernel');
  ld_v(rb_mMath, 'rb_mMath');
  ld_v(rb_mProcess, 'rb_mProcess');
  ld_v(rb_mRubyVMFrozenCore, 'rb_mRubyVMFrozenCore');
  ld_v(rb_mWaitReadable, 'rb_mWaitReadable');
  ld_v(rb_mWaitWritable, 'rb_mWaitWritable');
  ld_v(rb_argv0, 'rb_argv0');
  ld_v(rb_default_rs, 'rb_default_rs');
  ld_v(rb_fs, 'rb_fs');
  ld_v(rb_output_fs, 'rb_output_fs');
  ld_v(rb_output_rs, 'rb_output_rs');
  ld_v(rb_rs, 'rb_rs');
  // load 1.9 variables
  ld_v(rb_infinity, 'rb_infinity');
  ld_v(rb_nan,      'rb_nan');
  // load 2.0 variables
  ld_i(ruby_global_name_punct_bits, 'ruby_global_name_punct_bits', 3);
 end;


